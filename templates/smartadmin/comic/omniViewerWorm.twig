{% extends 'smartadmin/base.html.twig' %}

{% block content %}
    <!-- BEGIN Page Content -->
    <!-- the #js-page-content id is needed for some plugins to initialize -->
    <main id="js-page-content" role="main" class="page-content">
        <!-- Your main content goes below here: -->
        <div class="row">
            <div class="shadow-5 m-auto present" style="width: 800px">
                {% for image in episode.images %}
                    <img src="{{ asset('upload/comics/'~episode.comic.id~'/'~episode.id~'/'~image) }}" width="800">
                {% endfor %}
            </div>
        </div>
    </main>
    <!-- this overlay is activated only when mobile menu is triggered -->
    <div class="page-content-overlay" data-action="toggle" data-class="mobile-nav-on"></div> <!-- END Page Content -->
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <link rel="stylesheet" media="screen, print" href="{{ asset('smartadmin/css/fa-solid.css') }}">
{% endblock %}

{#
Variables:
- navFooter (if enabled and Not false shows Navigation Footer (chat logs, support chat and make a call)
#}
{%  block leftMenu %}
{#    {% include 'smartadmin/parts/leftMenu.html.twig' %}#}
{% endblock %}

{% block header %}
    {% include 'smartadmin/parts/header.html.twig' %}
{% endblock %}

{% block footer %}
    {% include 'smartadmin/parts/footer.twig' %}
{%  endblock %}

{% block quickmenu %}
{% endblock %}

{% block messenger %}
{% endblock %}

{% block pagesettings %}
    {% include 'smartadmin/parts/pagesettings.twig' %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        initApp.pushSettings("layout-composed", true);
        layouts.hideNavigation('off')
        layouts.fixedHeader('on')

        window.addEventListener("keyup", function(e) {
            if (e.keyCode == 44) {
                $('#js-page-content').prepend('<div class="text-center cenzor" style="font-family: \'Dancing Script\', cursive; width: 100%; height: 100vh; background: black; z-index: 9999; position: fixed; left: 0; top: 0" onclick="removeCenzor()">' +
                    '<h1 style="margin-top: 45vh; color: hotpink">Please Don\'t Steal!</h1>' +
                    '</div>')
                $.ajax('{{ path('stop_print') }}', {
                    method: "POST"
                });
            }
        });

        let mouseIsInTheBox = false;
        let hidden = false; //fire just once

        function removeCenzor(){
            $('.cenzor').remove();
        }

        function showHeader(){
            mouseIsInTheBox = true;
            if (hidden === true){
                //$('.page-header-target').css('visibility', 'visible')
                $('.page-header-target').animate({
                    marginTop: "0"
                }, 50)
                //$('.page-header-target').slideDown()
                $('.page-header-target').addClass('shadow-lg')
                hidden = false;
            }
        }

        function hideHeader(){
            mouseIsInTheBox = false;
            if ($(window).scrollTop() > 66){
                if(hidden === false){
                    //$('.page-header-target').css('visibility', 'hidden')
                    $('.page-header-target').animate({
                        marginTop: "-66px"
                    }, 50)
                    //$('.page-header-target').slideUp()
                    $('.page-header-target').removeClass('shadow-lg')
                    hidden = true;
                }
            }
        }

        document.addEventListener('scroll', function(e) {
            if ($(window).scrollTop() > 66 && mouseIsInTheBox === false){
                if(hidden === false){
                    //$('.page-header-target').css('visibility', 'hidden')
                    $('.page-header-target').animate({
                        marginTop: "-66px"
                    }, 50)
                    //$('.page-header-target').slideUp()
                    $('.page-header-target').removeClass('shadow-lg')
                    hidden = true;
                }
            }

            if ($(window).scrollTop() < 66){
                if (hidden === true){
                    //$('.page-header-target').css('visibility', 'visible')
                    $('.page-header-target').animate({
                        marginTop: "0"
                    }, 50)
                    //$('.page-header-target').slideToggle()
                    $('.page-header-target').addClass('shadow-lg')
                    hidden = false;
                }
            }
        })
    </script>
{% endblock %}